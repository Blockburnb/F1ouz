<!DOCTYPE html>
<html>
<head>
    <title>CSV to JSON Converter</title>
</head>
<body>
    <input type="file" id="csvFile" accept=".csv">
    <button onclick="convertCSVtoJSON()">Convert to JSON</button>
    <p id="myp" style="color: blue"> Liste des utilisateurs </p>

    <script>
        // Fonction qui va ouvrir une fenêtre afin de parcourir le PC et chercher le fichier Json
        function convertCSVtoJSON() {
            const csvFile = document.getElementById('csvFile').files[0];
            if (!csvFile) {
                alert('Please select a CSV file.');
                return;
            }

            const reader = new FileReader();
            reader.readAsText(csvFile);

            reader.onload = function (e) {
                //Récupération dans une variable du résultat du vReader
                const csvText = e.target.result;
                /* Contrairement à un fichier JSON on ne peut transformer 
                * directement le contenu d'un fichier CSV et objet JSON. 
                * On doit faire un traitement préalable*/

                //On recupère un tableau de ligne 
                lines= csvText.split('\n')               //\n indique la fin d'une ligne
                    .map(line => line.trim())            //Enlève les espace superflux au début et à la fin
                    .filter(line => line.length > 0);    //Enlève les lignes vides

                //Le tableau d'objets JSON dans lequel on va mettre chaque objet JSON
                var jsonObjects = [];

                //Q3-c: Appel de la fontion "getJsonObjectFromCsvLines"
                //jsonObjects=

                //Q3-d: Appel de la fontion "getInnerHtmlStringFromObject"
                //var vRes = 
                
                //Affichage du resultat au niveau du paragraphe avec l'id "myp"
                document.getElementById("myp").innerHTML = vRes;
            };
        }

        //Q3-a
        function getJsonObjectFromCsvLines(/*?*/) {
            //A completer
        }
    
        //Q3-b
        function getInnerHtmlStringFromObject(/*?*/) {
            var nbElem = jsonObjects.length;
            //Boucle sur les éléments et récupération du résultat dans une variable vRes
       
        }
    </script>
</body>
</html>
